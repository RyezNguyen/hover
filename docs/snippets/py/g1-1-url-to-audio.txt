from io import BytesIO
import librosa


@wrappy.memoize(
    cache_limit=10000,
    persist_path='.cache/url_to_audio.pkl',
    persist_batch_size=100,
)
def url_to_audio(url):
    """
    Turn a URL to audio data.
    """
    data, sampling_rate = librosa.load(BytesIO(url_to_content(url)))
    return data, sampling_rate
